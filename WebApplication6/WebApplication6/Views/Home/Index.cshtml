@using Newtonsoft.Json;
@model WebApplication6.Models.Numbers
@{
    ViewBag.Title = "Index";
}
<script>
    //function viewModel() {
    //    var self = this;
    //    self.salesdata = ko.observableArray();
    //};

    $(document).ready(function () {
        var vm = new NumbersViewModel();
        vm.data(ko.mapping.fromJS(@(Html.Raw(JsonConvert.SerializeObject(Model)))));
        vm.init();
        ko.applyBindings(vm, $('#content').get(0));
        //$("#button").click(function () {
        //    var item = $("#newRandom").val();
        //    var self = this;
        //    entries: ko.observableArray(),
        //    $.ajax({
        //        url: '/Home/Index',
        //        type: 'POST',
        //        dataType: 'json',
        //        data: { "value": item },
        //        success: function (data) {
        //            var information = data.val();
        //            var mappedRests2 = $.map($.parseJSON(information));
        //            self.salesdata(mappedRests2);
        //        }
        //    });
        //});
    });

</script>

<div id="content">
    <h1>Add random numbers</h1>
    <div id="randomNumbers">
        <!-- ko foreach: $root.data().randomNumbers.Numbers -->
        <div data-bind="text: $data"></div>
        <!--/ko-->
    </div>

    @using (Ajax.BeginForm("Index", "Home", new AjaxOptions { UpdateTargetId = "randomNumbers", HttpMethod = "Post" }))
    {
        <input type="text" id="newRandom" name="value" />
        <input type="submit" id="button" value=" + " />
    }
   
    @*<button data-bind="click: function() { $root.addRandomNumber($('#newRandom').val()); }">+</button>*@

    <hr style="height:5px" />
    <h1>Add number</h1>
    <!-- ko foreach: $root.data().staticNumbers.Numbers -->
    <!-- ko if: $index() % 5 == 0 -->
    <hr />
    <!--/ko-->
    <div class="number" id="staticNumbers" data-bind="text: $data"></div>
    <!--/ko-->

    <input type="color" id="newColor" />
    <input type="text" id="newStatic" />
    <button data-bind="click: function() { $root.addStaticNumber($('#newColor').val(), $('#newStatic').val()); }">+</button>
</div>